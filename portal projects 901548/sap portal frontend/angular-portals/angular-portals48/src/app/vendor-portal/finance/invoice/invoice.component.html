<div class="invoice-container">
  <!-- Header Section -->
  <div class="invoice-header">
    <div class="header-content">
      <div class="title-section">
        <div class="header-icon">
          <i class="fas fa-file-invoice-dollar"></i>
        </div>
        <h1 class="invoice-title">Welcome to Invoice Management!</h1>
        <p class="invoice-subtitle">Invoice Portal</p>
      </div>
      <button class="back-button" (click)="goBack()">
        <i class="fas fa-arrow-left back-icon"></i>
        BACK
      </button>
    </div>
  </div>

  <!-- Controls -->
  <div class="controls-card">
    <div class="search-section">
      <div class="search-wrapper">
        <i class="fas fa-search search-icon"></i>
        <input
          class="search-input"
          type="text"
          placeholder="Search Doc Number, PO Number..."
          [(ngModel)]="searchTerm"
        />
      </div>
      <div class="stat-item">
        <div class="stat-label">TOTAL ITEMS</div>
        <div class="stat-value">{{ filteredInvoiceData.length }}</div>
      </div>
      <div class="stat-item">
        <div class="stat-label">PAGE</div>
        <div class="stat-value">1 / 1</div>
      </div>
    </div>
  </div>

  <div class="content-card" *ngIf="filteredInvoiceData.length > 0">
    <div class="table-container">
      <div class="table-header">
        <h2 class="table-title">Invoice Items</h2>
        <div class="table-actions">
          <button class="action-button" (click)="exportData()">
            <i class="fas fa-download"></i>
            EXPORT
          </button>
          <button class="action-button" (click)="refreshData()">
            <i class="fas fa-sync-alt"></i>
            REFRESH
          </button>
        </div>
      </div>
      <table class="invoice-table">
        <thead>
          <tr>
            <th>Invoice No</th>
            <th>Invoice Date</th>
            <th>PO No</th>
            <th>PO Item</th>
            <th>Material No</th>
            <th>Description</th>
            <th>Quantity</th>
            <th>Unit</th>
            <th>Unit Price</th>
            <th>Total Amount</th>
            <th>Currency</th>
            <th>PDF</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let invoice of filteredInvoiceData">
            <td>{{ invoice.invoiceNo }}</td>
            <td>{{ formatDate(invoice.invoiceDate) }}</td>
            <td>{{ invoice.poNo }}</td>
            <td>{{ invoice.poItem }}</td>
            <td>{{ invoice.materialNo }}</td>
            <td>{{ invoice.description }}</td>
            <td>{{ invoice.quantity }}</td>
            <td>{{ invoice.unit }}</td>
            <td>{{ invoice.unitPrice }}</td>
            <td>{{ invoice.totalAmount }}</td>
            <td>{{ invoice.currency }}</td>
            <td>
              <button class="pdf-button" (click)="downloadPdf(invoice.invoiceNo)">Download PDF</button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
  <div *ngIf="loading" class="loading-text">Loading invoice data...</div>
  <div *ngIf="errorMessage" class="error-message">{{ errorMessage }}</div>
  <div class="table-wrapper">
    <p *ngIf="filteredInvoiceData.length === 0 && !loading && !errorMessage" class="no-data-message">
      No invoice data found for this vendor.
    </p>
  </div>
</div>

<div class="profile-container">
  <div class="profile-content">
    <!-- Header Section -->
    <div class="header-section">
      <h2>Customer Profile</h2>
      
      <!-- Controls -->
      <div class="controls">
        <!-- Search Container -->
        <div class="search-container">
          <svg class="search-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="11" cy="11" r="8"></circle>
            <path d="m21 21-4.35-4.35"></path>
          </svg>
          <input 
            type="text" 
            placeholder="Search profiles..." 
            [(ngModel)]="searchTerm" 
            (input)="onSearch()"
            class="search-input"
          />
          <button 
            *ngIf="searchTerm" 
            (click)="clearSearch()" 
            class="clear-btn"
            title="Clear search"
          >
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <line x1="18" y1="6" x2="6" y2="18"></line>
              <line x1="6" y1="6" x2="18" y2="18"></line>
            </svg>
          </button>
        </div>

        <!-- Action Buttons -->
        <div class="action-buttons">
          <button 
            class="action-btn" 
            (click)="refreshProfile()" 
            [disabled]="isLoading"
            title="Refresh profile data"
          >
            <svg class="btn-icon" [class.spinning]="isLoading" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M21 2v6h-6"></path>
              <path d="M3 12a9 9 0 0 1 15-6.7L21 8"></path>
              <path d="M3 22v-6h6"></path>
              <path d="M21 12a9 9 0 0 1-15 6.7L3 16"></path>
            </svg>
            {{ isLoading ? 'Refreshing...' : 'Refresh' }}
          </button>
        </div>
      </div>
    </div>

    <!-- Loading Overlay -->
    <div class="loading-overlay" *ngIf="isLoading">
      <div class="loading-spinner"></div>
      <div class="loading-text">Loading profile data...</div>
    </div>

    <!-- Export Overlay -->
    <div class="export-overlay" *ngIf="isExporting">
      <div class="export-spinner"></div>
      <div class="export-text">Exporting profile data...</div>
    </div>

    <!-- Profile Content -->
    <div *ngIf="!isLoading && profileData; else loadingOrError">
      <!-- Profile Header Card -->
      <div class="profile-header-card">
        <div class="profile-header-content">
          <div class="profile-avatar">
            <span class="material-icons">person</span>
          </div>
          <div class="profile-header-info">
            <h1>Customer Profile</h1>
            <p>Manage your account information and settings</p>
            <div class="profile-status">
              <span class="status-indicator"></span>
              <span class="status-text">Active Account</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Profile Information Cards -->
      <div class="profile-sections">
        <!-- Personal Information -->
        <section class="profile-section">
          <div class="section-header">
            <h2>
              <span class="material-icons">person_outline</span>
              Personal Information
            </h2>
            <div class="section-badge">Primary</div>
          </div>
          <div class="info-grid">
            <div class="info-item">
              <div class="info-label">
                <span class="material-icons">badge</span>
                Customer ID
              </div>
              <div class="info-value">{{ customerId || 'N/A' }}</div>
            </div>
            <div class="info-item">
              <div class="info-label">
                <span class="material-icons">person</span>
                Full Name
              </div>
              <div class="info-value">{{ profileData.name1 || 'Not provided' }}</div>
            </div>
            <div class="info-item">
              <div class="info-label">
                <span class="material-icons">email</span>
                Email Address
              </div>
              <div class="info-value">{{ profileData.email || 'customer@kaar.com' }}</div>
            </div>
            <div class="info-item">
              <div class="info-label">
                <span class="material-icons">phone</span>
                Phone Number
              </div>
              <div class="info-value">{{ profileData.phone || '+1 (555) 123-4567' }}</div>
            </div>
          </div>
        </section>

        <!-- Address Information -->
        <section class="profile-section">
          <div class="section-header">
            <h2>
              <span class="material-icons">location_on</span>
              Address Information
            </h2>
            <div class="section-badge">Location</div>
          </div>
          <div class="info-grid">
            <div class="info-item full-width">
              <div class="info-label">
                <span class="material-icons">home</span>
                Street Address
              </div>
              <div class="info-value">{{ profileData.street || 'Not provided' }}</div>
            </div>
            <div class="info-item">
              <div class="info-label">
                <span class="material-icons">location_city</span>
                City
              </div>
              <div class="info-value">{{ profileData.city || 'Not provided' }}</div>
            </div>
            <div class="info-item">
              <div class="info-label">
                <span class="material-icons">markunread_mailbox</span>
                Postal Code
              </div>
              <div class="info-value">{{ profileData.postal || 'Not provided' }}</div>
            </div>
            <div class="info-item">
              <div class="info-label">
                <span class="material-icons">public</span>
                Country
              </div>
              <div class="info-value">{{ profileData.country || 'Not provided' }}</div>
            </div>
            <div class="info-item">
              <div class="info-label">
                <span class="material-icons">map</span>
                Region
              </div>
              <div class="info-value">{{ profileData.region || 'Not specified' }}</div>
            </div>
          </div>
        </section>

        <!-- Account Information -->
        <section class="profile-section">
          <div class="section-header">
            <h2>
              <span class="material-icons">account_circle</span>
              Account Details
            </h2>
            <div class="section-badge">System</div>
          </div>
          <div class="info-grid">
            <div class="info-item">
              <div class="info-label">
                <span class="material-icons">calendar_today</span>
                Account Created
              </div>
              <div class="info-value">{{ profileData.createdDate || 'January 2024' }}</div>
            </div>
            <div class="info-item">
              <div class="info-label">
                <span class="material-icons">update</span>
                Last Updated
              </div>
              <div class="info-value">{{ profileData.lastUpdated || 'Recently' }}</div>
            </div>
            <div class="info-item">
              <div class="info-label">
                <span class="material-icons">verified</span>
                Account Status
              </div>
              <div class="info-value status-active">
                <span class="status-dot"></span>
                Active & Verified
              </div>
            </div>
            <div class="info-item">
              <div class="info-label">
                <span class="material-icons">security</span>
                Security Level
              </div>
              <div class="info-value security-high">
                <span class="material-icons">shield</span>
                High Security
              </div>
            </div>
          </div>
        </section>
      </div>

      <!-- Quick Access Section -->
      <div class="quick-access-section">
        <div class="section-header">
          <h3>
            <span class="material-icons">flash_on</span>
            Quick Actions
          </h3>
        </div>
        <div class="quick-access-grid">
          <button class="quick-access-item" (click)="downloadProfile()">
            <div class="quick-access-icon">
              <span class="material-icons">download</span>
            </div>
            <span class="quick-access-text">Download Profile</span>
          </button>
          <button class="quick-access-item" (click)="printProfile()">
            <div class="quick-access-icon">
              <span class="material-icons">print</span>
            </div>
            <span class="quick-access-text">Print Profile</span>
          </button>
          <button class="quick-access-item" (click)="shareProfile()">
            <div class="quick-access-icon">
              <span class="material-icons">share</span>
            </div>
            <span class="quick-access-text">Share Profile</span>
          </button>
          <button class="quick-access-item" (click)="changePassword()">
            <div class="quick-access-icon">
              <span class="material-icons">key</span>
            </div>
            <span class="quick-access-text">Change Password</span>
          </button>
        </div>
      </div>

      <!-- Activity Summary -->
      <div class="activity-summary">
        <h3>
          <span class="material-icons">analytics</span>
          Account Activity Summary
        </h3>
        <div class="activity-stats">
          <div class="stat-item">
            <div class="stat-value">{{ profileData.totalOrders || '47' }}</div>
            <div class="stat-label">Total Orders</div>
          </div>
          <div class="stat-item">
            <div class="stat-value">{{ profileData.activeOrders || '12' }}</div>
            <div class="stat-label">Active Orders</div>
          </div>
          <div class="stat-item">
            <div class="stat-value">{{ profileData.totalValue || '$24.5K' }}</div>
            <div class="stat-label">Total Value</div>
          </div>
          <div class="stat-item">
            <div class="stat-value">{{ profileData.lastLogin || '2 hours ago' }}</div>
            <div class="stat-label">Last Login</div>
          </div>
        </div>
      </div>
    </div>

    <!-- Loading and Error States -->
    <ng-template #loadingOrError>
      <div class="loading-container" *ngIf="!errorMessage">
        <div class="loading-spinner">
          <div class="spinner"></div>
        </div>
        <h3>Loading Profile...</h3>
        <p>Please wait while we fetch your information</p>
      </div>
      
      <div class="error-container" *ngIf="errorMessage">
        <div class="error-icon">
          <span class="material-icons">error_outline</span>
        </div>
        <h3>Unable to Load Profile</h3>
        <p>{{ errorMessage }}</p>
        <button class="retry-btn" (click)="fetchProfile()">
          <span class="material-icons">refresh</span>
          Try Again
        </button>
      </div>
    </ng-template>
  </div>
</div>






